document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("togglePassword"),s=document.getElementById("password");l.addEventListener("click",function(){const o=s.getAttribute("type")==="password"?"text":"password";s.setAttribute("type",o),this.classList.toggle("fa-eye"),this.classList.toggle("fa-eye-slash")});const a=document.getElementById("registrationForm"),i=document.getElementById("registerButton");a.addEventListener("input",function(o){const e=o.target,n=document.getElementById(`${e.name}Error`);let t=!0;n.textContent="",e.classList.remove("valid","invalid"),(e.name==="nom"||e.name==="prenom")&&(/^[A-Z][a-zA-Z]*(\s[A-Z][a-zA-Z]*)*$/.test(e.value)||(t=!1,n.textContent="Doit commencer par une majuscule et ne contenir que des lettres.")),e.name==="email"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(t=!1,n.textContent="Adresse e-mail invalide.")),e.name==="telephone"&&(/^\d{9}$/.test(e.value)||(t=!1,n.textContent="Numéro de téléphone invalide (exactement 9 chiffres).")),e.name==="adresse"&&e.value.trim()===""&&(t=!1,n.textContent="L'adresse ne peut pas être vide."),e.name==="date_naissance"&&new Date(e.value)>=new Date&&(t=!1,n.textContent="La date de naissance doit être dans le passé."),e.name==="password"&&(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/.test(e.value)||(t=!1,n.textContent="Doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.")),e.name==="numero_identite"&&(/^\d{9}$/.test(e.value)||(t=!1,n.textContent="Le numéro d'identité doit contenir exactement 9 chiffres.")),e.name==="role"&&e.value.trim()===""&&(t=!1,n.textContent="Le rôle ne peut pas être vide."),t?(e.classList.add("valid"),e.classList.remove("invalid")):(e.classList.add("invalid"),e.classList.remove("valid"))}),i.addEventListener("click",function(o){o.preventDefault();let e=!0;a.querySelectorAll("input, select").forEach(t=>{t.classList.contains("valid")||(e=!1)}),e&&a.submit()})});document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("registrationForm"),s=document.getElementById("successModal"),a=document.getElementById("closeModal");l.addEventListener("submit",function(i){i.preventDefault(),s.style.display="block"}),a.addEventListener("click",function(){s.style.display="none",window.location.href="/"}),window.addEventListener("click",function(i){i.target===s&&(s.style.display="none",window.location.href="/")})});
