document.addEventListener("DOMContentLoaded",function(){const r=document.getElementById("togglePassword"),i=document.getElementById("password");r.addEventListener("click",function(){const a=i.getAttribute("type")==="password"?"text":"password";i.setAttribute("type",a),this.classList.toggle("fa-eye"),this.classList.toggle("fa-eye-slash")});const o=document.getElementById("registrationForm"),l=document.getElementById("registerButton");o.addEventListener("input",function(a){const e=a.target,t=document.getElementById(`${e.name}Error`);let n=!0;t.textContent="",e.classList.remove("valid","invalid"),(e.name==="nom"||e.name==="prenom")&&(/^[A-Z][a-zA-Z]*(\s[A-Z][a-zA-Z]*)*$/.test(e.value)||(n=!1,t.textContent="Doit commencer par une majuscule et ne contenir que des lettres.")),e.name==="email"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(n=!1,t.textContent="Adresse e-mail invalide.")),e.name==="telephone"&&(/^\d{9}$/.test(e.value)||(n=!1,t.textContent="Numéro de téléphone invalide (exactement 9 chiffres).")),e.name==="adresse"&&e.value.trim()===""&&(n=!1,t.textContent="L'adresse ne peut pas être vide."),e.name==="date_naissance"&&new Date(e.value)>=new Date&&(n=!1,t.textContent="La date de naissance doit être dans le passé."),e.name==="password"&&(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/.test(e.value)||(n=!1,t.textContent="Doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.")),e.name==="numero_identite"&&(/^\d{9}$/.test(e.value)||(n=!1,t.textContent="Le numéro d'identité doit contenir exactement 9 chiffres.")),e.name==="role"&&e.value.trim()===""&&(n=!1,t.textContent="Veuillez choisir un rôle."),n?(e.classList.add("valid"),e.classList.remove("invalid")):(e.classList.add("invalid"),e.classList.remove("valid"));const d=Array.from(o.elements).every(s=>s.classList.contains("valid")||s.type==="submit");l.disabled=!d})});
